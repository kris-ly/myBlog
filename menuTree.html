<!DOCTYPE html>
<html>
<head>
<title>javascript base tree</title>
</head>
<body>
<div id="mytree"></div>
</body>
</html>
<script>
var dic = {
		"0" : {pid:-1,cn:'本书目录',url:'/'}
		,"1" : {pid:0,cn:'第1章 JavaScript概述',url:'/01'}
		,"2" : {pid:0,cn:'第2章 用JavaScript验证表单',url:'/02'}
		,"11" : {pid:1,cn:'1.1 认识JavaScript',url:'#'}
		,"12" : {pid:1,cn:'1.2 配置JavaScript开发环境',url:'#'}
		,"3" : {pid:0,cn:'第3章 JavaScript实现的照片展示',url:'/03'}
		,"21" : {pid:2,cn:'2.1  最简单的表单验证 C 禁止空白的必填项目',url:'#'}
		,"22" : {pid:2,cn:'2.2  处理各种类型的表单元素',url:'#'}
		,"23" : {pid:2,cn:'2.3  输入的邮箱地址正确吗？用正则来校验复杂的格式要求',url:'#'}
		,"24" : {pid:2,cn:'2.4  改善用户体验',url:'#'}
		,"31" : {pid:3,cn:'3.1  功能设计',url:'#'}
		,"32" : {pid:3,cn:'3.2  照片加载与定位',url:'#'}
		,"33" : {pid:3,cn:'3.3  响应鼠标动作',url:'#'}
	};//因为无序排列，下面必须做依赖关系处理
	for(var i in dic){
		var dicParent = dic[dic[i].pid];
		if(dicParent){
			if(dicParent.child !== undefined){
				dicParent.child.push(i);
			}
			else{
				dicParent.child=[];
				dicParent.child.push(i);
			}
		}
	}
var formTree=function(ele,startNode){
		var ul = document.createElement("ul");
		for(var i in dic){
			if(dic[i].pid == startNode){
				var dl = dic[i];
				var dicChild = document.createElement("li");
				dicChild.innerHTML = '<a href="'+dl.url+'">'+dl.cn+'</a>';
				if(dl.child && dl.child.length >0){
					formTree(dicChild,i.toString());
				}
				ul.appendChild(dicChild);
			}
			else { continue;}
		}
		ele.appendChild(ul);
	};
	var div1 = document.getElementById("mytree");
	formTree(div1,-1);
</script>